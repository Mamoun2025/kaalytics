<!--
KAALYTICS - Parallax Layers Effect
====================================
Effet de parallaxe multicouche au scroll
-->

<div class="parallax-demo">
    <!-- Hero section with parallax -->
    <section class="parallax-hero">
        <div class="parallax-layer parallax-layer--back" data-speed="0.2">
            <div class="parallax-stars"></div>
        </div>

        <div class="parallax-layer parallax-layer--mid" data-speed="0.5">
            <div class="parallax-shape parallax-shape--1"></div>
            <div class="parallax-shape parallax-shape--2"></div>
            <div class="parallax-shape parallax-shape--3"></div>
        </div>

        <div class="parallax-layer parallax-layer--front" data-speed="0.8">
            <div class="parallax-content">
                <h1>Parallax Layers</h1>
                <p>Faites defiler pour voir l'effet de profondeur</p>
                <div class="scroll-indicator">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M19 12l-7 7-7-7"/>
                    </svg>
                </div>
            </div>
        </div>
    </section>

    <!-- Content sections with parallax elements -->
    <section class="parallax-section">
        <div class="parallax-element" data-speed="-0.3" data-direction="horizontal">
            <div class="floating-card floating-card--1">
                <div class="floating-card__icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </div>
                <span>Temps reel</span>
            </div>
        </div>

        <div class="section-content">
            <h2>Profondeur Visuelle</h2>
            <p>Le parallaxe cree une illusion de profondeur en deplacant les elements a des vitesses differentes lors du defilement. Les couches d'arriere-plan bougent plus lentement que celles au premier plan.</p>
        </div>

        <div class="parallax-element" data-speed="0.4" data-direction="horizontal">
            <div class="floating-card floating-card--2">
                <div class="floating-card__icon floating-card__icon--blue">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                </div>
                <span>Securite</span>
            </div>
        </div>
    </section>

    <!-- Image parallax -->
    <section class="parallax-image-section">
        <div class="parallax-image-container">
            <div class="parallax-image" data-speed="0.3">
                <div class="parallax-image__placeholder">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <path d="M21 15l-5-5L5 21"/>
                    </svg>
                </div>
            </div>
        </div>
        <div class="parallax-image-text" data-speed="-0.2">
            <h3>Images Immersives</h3>
            <p>Les images defilent a une vitesse differente du texte, creant un effet de fenetre sur le contenu.</p>
        </div>
    </section>

    <!-- Cards with depth -->
    <section class="parallax-cards-section">
        <h2>Cartes en Profondeur</h2>

        <div class="parallax-cards">
            <div class="depth-card" data-speed="-0.15">
                <div class="depth-card__content">
                    <div class="depth-card__icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                            <path d="M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <h4>Analytics</h4>
                    <p>Visualisation avancee</p>
                </div>
            </div>

            <div class="depth-card depth-card--center" data-speed="0">
                <div class="depth-card__content">
                    <div class="depth-card__icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 20V10"/>
                            <path d="M12 20V4"/>
                            <path d="M6 20v-6"/>
                        </svg>
                    </div>
                    <h4>Performance</h4>
                    <p>Metriques en temps reel</p>
                </div>
            </div>

            <div class="depth-card" data-speed="0.15">
                <div class="depth-card__content">
                    <div class="depth-card__icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                        </svg>
                    </div>
                    <h4>Rapidite</h4>
                    <p>Optimisation continue</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer parallax -->
    <section class="parallax-footer">
        <div class="parallax-layer" data-speed="0.1">
            <div class="footer-shapes">
                <div class="footer-shape footer-shape--1"></div>
                <div class="footer-shape footer-shape--2"></div>
            </div>
        </div>
        <div class="footer-content">
            <p>Fin de la demonstration parallaxe</p>
        </div>
    </section>
</div>

<style>
:root {
    --emerald: #10b981;
    --emerald-dim: #047857;
    --teal: #0d9488;
    --blue: #3b82f6;
    --purple: #8b5cf6;
    --bg-void: #040a08;
    --bg-card: #0d1f1a;
    --bg-tertiary: #1a312d;
    --text-primary: #f0fdf4;
    --text-muted: #86efac;
    --border: rgba(16, 185, 129, 0.2);
}

.parallax-demo {
    background: var(--bg-void);
    font-family: system-ui, -apple-system, sans-serif;
    overflow-x: hidden;
}

/* Hero parallax */
.parallax-hero {
    position: relative;
    height: 100vh;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

.parallax-layer {
    position: absolute;
    inset: 0;
    will-change: transform;
}

.parallax-layer--back {
    z-index: 1;
}

.parallax-layer--mid {
    z-index: 2;
}

.parallax-layer--front {
    z-index: 3;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Stars background */
.parallax-stars {
    position: absolute;
    inset: 0;
    background-image: radial-gradient(2px 2px at 20px 30px, rgba(16, 185, 129, 0.3), transparent),
                      radial-gradient(2px 2px at 40px 70px, rgba(13, 148, 136, 0.3), transparent),
                      radial-gradient(1px 1px at 90px 40px, rgba(16, 185, 129, 0.2), transparent),
                      radial-gradient(2px 2px at 130px 80px, rgba(13, 148, 136, 0.3), transparent),
                      radial-gradient(1px 1px at 160px 120px, rgba(16, 185, 129, 0.2), transparent);
    background-size: 200px 200px;
    animation: twinkle 5s ease-in-out infinite;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}

/* Floating shapes */
.parallax-shape {
    position: absolute;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--emerald-dim), var(--emerald));
    opacity: 0.2;
    filter: blur(40px);
}

.parallax-shape--1 {
    width: 300px;
    height: 300px;
    top: 10%;
    left: 10%;
}

.parallax-shape--2 {
    width: 200px;
    height: 200px;
    top: 60%;
    right: 15%;
    background: linear-gradient(135deg, var(--teal), var(--blue));
}

.parallax-shape--3 {
    width: 150px;
    height: 150px;
    bottom: 20%;
    left: 30%;
    background: linear-gradient(135deg, var(--purple), var(--teal));
}

/* Hero content */
.parallax-content {
    text-align: center;
    color: var(--text-primary);
}

.parallax-content h1 {
    font-size: 4rem;
    font-weight: 800;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, var(--text-primary) 0%, var(--emerald) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.parallax-content p {
    color: var(--text-muted);
    font-size: 1.25rem;
    margin-bottom: 3rem;
}

.scroll-indicator {
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(10px); }
}

/* Content sections */
.parallax-section {
    position: relative;
    padding: 8rem 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 60vh;
}

.section-content {
    max-width: 600px;
    text-align: center;
    z-index: 5;
}

.section-content h2 {
    color: var(--text-primary);
    font-size: 2.5rem;
    margin-bottom: 1.5rem;
}

.section-content p {
    color: var(--text-muted);
    line-height: 1.8;
}

/* Parallax elements */
.parallax-element {
    position: absolute;
    will-change: transform;
}

.parallax-element:first-of-type {
    left: 5%;
}

.parallax-element:last-of-type {
    right: 5%;
}

.floating-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--text-primary);
    box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.3);
}

.floating-card__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--emerald-dim), var(--emerald));
    border-radius: 10px;
    color: white;
}

.floating-card__icon--blue {
    background: linear-gradient(135deg, #1d4ed8, var(--blue));
}

/* Image parallax */
.parallax-image-section {
    position: relative;
    min-height: 70vh;
    display: flex;
    align-items: center;
    overflow: hidden;
}

.parallax-image-container {
    position: absolute;
    inset: -20%;
    z-index: 1;
}

.parallax-image {
    width: 100%;
    height: 100%;
    will-change: transform;
}

.parallax-image__placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-card));
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--emerald);
    opacity: 0.5;
}

.parallax-image-text {
    position: relative;
    z-index: 5;
    max-width: 500px;
    margin: 0 auto;
    padding: 3rem;
    background: rgba(4, 10, 8, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid var(--border);
    border-radius: 16px;
    text-align: center;
    will-change: transform;
}

.parallax-image-text h3 {
    color: var(--text-primary);
    font-size: 1.75rem;
    margin-bottom: 1rem;
}

.parallax-image-text p {
    color: var(--text-muted);
}

/* Depth cards */
.parallax-cards-section {
    padding: 8rem 2rem;
    text-align: center;
}

.parallax-cards-section h2 {
    color: var(--text-primary);
    font-size: 2rem;
    margin-bottom: 3rem;
}

.parallax-cards {
    display: flex;
    justify-content: center;
    gap: 2rem;
    flex-wrap: wrap;
}

.depth-card {
    width: 250px;
    will-change: transform;
}

.depth-card__content {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 2rem;
    transition: all 0.3s;
}

.depth-card:hover .depth-card__content {
    transform: translateY(-5px);
    border-color: var(--emerald);
    box-shadow: 0 20px 40px -15px rgba(16, 185, 129, 0.3);
}

.depth-card--center .depth-card__content {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), var(--bg-card));
    border-color: var(--emerald);
}

.depth-card__icon {
    width: 64px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--emerald-dim), var(--emerald));
    border-radius: 12px;
    margin: 0 auto 1rem;
    color: white;
}

.depth-card h4 {
    color: var(--text-primary);
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
}

.depth-card p {
    color: var(--text-muted);
    font-size: 0.9rem;
}

/* Footer */
.parallax-footer {
    position: relative;
    height: 50vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.footer-shapes {
    position: absolute;
    inset: 0;
}

.footer-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.1;
}

.footer-shape--1 {
    width: 400px;
    height: 400px;
    background: var(--emerald);
    bottom: -200px;
    left: -100px;
}

.footer-shape--2 {
    width: 300px;
    height: 300px;
    background: var(--teal);
    bottom: -150px;
    right: -50px;
}

.footer-content {
    position: relative;
    z-index: 5;
    color: var(--text-muted);
    font-size: 1.25rem;
}

/* Responsive */
@media (max-width: 768px) {
    .parallax-content h1 {
        font-size: 2.5rem;
    }

    .parallax-element {
        display: none;
    }

    .parallax-cards {
        flex-direction: column;
        align-items: center;
    }

    .depth-card {
        width: 100%;
        max-width: 300px;
    }
}
</style>

<script>
(function() {
    const parallaxElements = document.querySelectorAll('[data-speed]');

    function updateParallax() {
        const scrollY = window.scrollY;

        parallaxElements.forEach(el => {
            const speed = parseFloat(el.dataset.speed);
            const direction = el.dataset.direction || 'vertical';
            const rect = el.getBoundingClientRect();
            const elementTop = rect.top + scrollY;
            const offset = (scrollY - elementTop) * speed;

            if (direction === 'horizontal') {
                el.style.transform = `translateX(${offset}px)`;
            } else {
                el.style.transform = `translateY(${offset}px)`;
            }
        });
    }

    // Throttle scroll events
    let ticking = false;
    window.addEventListener('scroll', () => {
        if (!ticking) {
            requestAnimationFrame(() => {
                updateParallax();
                ticking = false;
            });
            ticking = true;
        }
    });

    updateParallax();
})();
</script>
